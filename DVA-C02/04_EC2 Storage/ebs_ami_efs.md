# EBS Volume
- 인스턴스가 실행 중인 동안 연결가능한 네트워크
- 하나의 인스턴스의 다중 ebs 연결 가능
- 네트워크를 필요로 하며 특정한 가용 영역에 고정되어 있습니다.
  - us-east-1a 생성 볼륨은 us-east-1b 로 연결이 불가능합니다.
- 스냅샷을 사용하면 다른 가용 영역으로도 볼륨을 옮길 수 있습니다.
- 데이터를 저장하고자 하는 등의 경우에는 루트 볼륨의 종료 시 삭제 속성을 비활성화하면 됩니다

# EBS Snapshot 
- EBS 스냅샷은 EBS 볼륨의 특정 시점에서의 백업입니다
- EBS 스냅샷을 다른 가용 영역 또는 다른 리전에 복사할 수 있어요
- 스냅샷 기능 
  - EBS 스냅샷 아카이브
    - 스냅샷을 최대 75% 더 저렴한 아카이브 티어로 옮길 수 있는 기능입니다
    - 24 ~ 72 시간정도의 복원 시간이 필요합니다. 
  - EBS 스냅샷을 위한 휴지통 생성
  - 빠른 스냅샷 복원
      - 스냅샷이 매우 클 때 ebs 볼륨을 초기화해야 하거나 빠르게 인스턴스화해야하는 경우 유용합니다.
      - 비용이 많이 듭니다. 
# AMI 
- 사용자 지정 ec2 인스턴스
- 소프트웨어 구성에 대해 운영체제를 정의 및 설정 하여 부팅과 구성에 시간이 단축됩니다.
- US-EAST-1A 인스턴스가 있고 동일한 US-EAST-1B 인스턴스를 생성했다고 했을 때
- US-EAST-1A에서 인스턴스를 실행하려면 먼저 이를 사용자 지정으로 바꾸고 Custom AMI인 AMI를 생성해 줍니다

# EBS instance Store
- 따라서 특정 유형의 EC2 인스턴스는 EC2 인스턴스 스토어라고 불리며 이는 해당하는 물리적 서버에 연결된 하드웨어 드라이브를 가리킵니다
- 버퍼나 캐시 스크래치 데이터 또는 임시 콘텐츠를 사용하려는 경우
- 마지막으로 EC2 인스턴스의 기본 서버에 장애가 발생할 시에는
  - 장기적인 스토리지 경우에는 ebs 가 적합합니다. 
- 여러분의 EC2 인스턴스에 성능이 아주 뛰어난 하드웨어가 연결된 것이 보일 때, 로컬 EC2 인스턴스 스토어를 생각하라는 점을 알려드리려 한 것뿐입니다
  - 32000 iops 인 경우에 적합합니다.
 
# EBS Volume
- GP2, GP3
  - 다양한 워크로드에 대해 가격과 성능의 군형을 맞추는 범융 ssd 볼륨
- io1, io2 block express
  - 가장 높은 성능의 ssd volume
  - 미션 크리티컬, 저지연, 고처리량 작업에 사용
- st1
  - 저비용 대용량 볼륨
  - SC1 볼륨은 가장 저렴한 HDD 볼륨으로 액세스 빈도가 낮은 작업을 위해 설계되었습니다

- GP2, GP3, Io1, Io2만 부팅 볼륨으로 사용할 수 있습니다 즉, OS의 루트가 실행되는 위치를 의미합니다
- 하지만 GP2, 범용 볼륨과 프로비저닝된 IOPS 볼륨이 시험에서 가장 중요할 것입니다
  - GP2는 비용 효율적인 스토리지로 낮은 대기 시간을 제공하며
  - GP3는 최신 세대 볼륨으로 기본적으로 3,000 IOPS와 초당 125MB의 처리량을 제공합니다
    - IOPS는 최대 16,000까지, 처리량은 초당 최대 1,000MB까지 독립적으로 증가시킬 수 있습니다

- GP2와 GP3는 비용 효율적인 스토리지와 낮은 지연 시간 용도라는 것을 기억하실 겁니다
- GP3에서는 IOPS와 처리량을 독립적으로 설정할 수 있지만 GP2에서는 서로 연결됩니다

- 이제 프로비저닝된 IOPS 볼륨에 대해 살펴보겠습니다
  - 지속적인 IOPS 성능이 필요한 중요한 비즈니스 애플리케이션이나
  - 16,000개 이상의 IOPS가 필요한 애플리케이션에 사용됩니다
  - 시험 관점에서 볼 때, 예를 들어 데이터베이스 작업이 스토리지 성능과 일관성에 매우 민감한 경우 프로비저닝된 볼륨은 아주 적합할 것입니다
  - Nitro EC2 인스턴스의 경우 약 64,000이고 다른 종류의 인스턴스의 경우 32,000입니다
  - io2 Block Express 볼륨을 사용하면 최대 64TB의 데이터를 사용할 수 있습니다

- ST1과 SC1은 부팅 볼륨이 될 수 없습니다
  - 처리량 최적화 HDD, 즉, ST1이 있습니다 ST1은 빅 데이터, 데이터 웨어하우징, 로그 처리에 적합하며
  - SC1은 아카이브 데이터용입니다 자주 액세스되지 않는 데이터용입니다

- 데이터베이스가 필요한 경우 범용 SSD와 프로비저닝된 IOPS SSD이고
- 높은 처리량과 가장 낮은 비용이 필요하다면 ST1 또는 SC1입니다
- 하지만 32,000 이상의 IOPS를 얻으려면 EC2 Nitro와 Io1 또는 Io2가 필요하다는 점을 기억하십시오

# EBS Volume 다중 첨부 기능
- 동일한 ebs 볼륨을 동일한 가용 영역에 있는 여러 개의 ec2 인스턴스에 첨부 
- EBS 볼륨 중 io1 및 io2 제품군에서만 사용할 수 있어요
- 참고로, 이 다중 첨부 기능은 당연히 지정된 가용 영역 내에서만 사용할 수 있어요
- 하나의 볼륨은 한 번에 최대 16개의 EC2 인스턴스에 부착할 수 있다는 거예요
- 마지막으로, 이 기능이 작동하려면 클러스터를 인식할 수 있는 파일 시스템을 사용해야 합니다
  - XFS나 Xe4와는 다른 파일 시스템입니다


# EFS
- 네트워크 파일 시스템이므로 많은 EC2 인스턴스에 마운트될 수 있어요
- 그리고 EC2 인스턴스는 서로 다른 가용성 영역에 있을 수도 있어요
- 가용성이 높고 확장성이 뛰어나며 비쌉니다
- GP2 EBS 볼륨의 약 3배죠 사용량에 따라 비용을 지불하므로 미리 용량을 프로비저닝할 필요가 없어요
- ![image](https://github.com/user-attachments/assets/3215c4b4-11d9-4c1f-83e4-147781adea3a)

- 내부적으로 NFS 프로토콜을 사용하며, EFS에 대한 액세스를 제어하려면 보안 그룹을 설정해야 합니다.
- kms 를 사용해서 efs 드라이브에서 미사용 암호화를 활성화 하며 linux 표준 파일 시스템
- 파일 시스템은 자동으로 확장되며 EFS에서 사용하는 데이터 GB 사용량에 따라 비용을 지불해요
- nfs 클라이언트 수천 개와 pb 규모의 네트워크 파일 시스템으로 자동 확장, 처리량이 높고 병렬성이 높습니다. 

- 프로비저닝을 사용하면 1TB의 스토리지에서 초당 1GiB를 처리할 수 있어요
  - 워크로드를 예측하기 어려울 때 유용합니다

# EFS Storagae Classes
- 스탠다드 계층은 자주 액세스하는 파일을 위한 계층이고 자주 액세스하지 않는 용도로는 EFS-IA 계층을 쓰며
  - 설정 과정에서 IA, 아카이브 기간 설정 가능합니다. (수명관리)
- 아카이브 스토리지 계층 거의 액세스하지 않는 데이터용 1년에 한번 액세스하는경우 훨씬 저렴합니다.
- 가용성과 내구성 측면에서 볼 때, 다중AZ 설정이 있는 경우 스탠다드를 사용하는 것이 좋습니다.
- 더 저렴한 옵션을 원한다면 One Zone 을 사용하면 됩니다
  - 하나의 az 에만 있고 백업은 기본적으로 활성화디도록 설정되어 있으며 액세스 빈도가 낮은 스토리지 계층과 호환
- 전반적으로 올바른 EFS 스토리지 클래스를 사용하면 최대 90%의 비용을 절감할 수 있습니다

---

- 버스팅은 실제 사용 중인 스토리지 용량에 따라 처리량을 확장하여 조금 더 늘릴 수 있는 방법입니다.
- Elastic(Recommended)는 EFS 파일 시스템의 크기에 관계없이 필요한 모든 IO를 제공하고 자동으로 확장할 수 있는 경우입니다
    - 예측할 수 없는 경우 적합

# EFS Exam
- bursting(throughpub mode), elastic(throughput mode), 그리고 provisioned(performance mode)가 있고 시험에서 기억해야할 것은 이게 다입니다

- EBS 볼륨은 한 번에 한 인스턴스에만 연결되는데 다중 연결 기능인 io1 또는 io2라는 유형의 볼륨을 사용하는 극단적인 경우는 제외인데
- EBS 볼륨은 AZ에 고정되는데
  - gp2 유형의 볼륨은 디스크의 크기가 증가해야 IO가 증가하는데 gp3와 io1 유형의 볼륨은 디스크 크기와 무관하게 IO를 증가 시킬 수 있습니다
- EFS는 EBS보다 가격대가 높지만 비용 절감을 위해 EFS-IA 기능을 이용할 수 있습니다












