# s3 수명 주기 규칙

아리프 사이클 규칙을 이용해서 클래스간의 객체를 자동으로 옮길 수 있습니다. 
어떤 객체를 다른 클래스로 이전할 최적의 일 수를 결정하는 것은 amazon s3 analytics 를 이용하며 standard 나 standard ia 에 관한 추천사항을 제시합니다. 

*시험 시나리오*

1. 예를 들어 EC2에 애플리케이션이 있고요, 그 앱은 프로필 사진이 Amazon S3에 업로드된 후에
이미지 섬네일을 생성해요, 하지만 그런 섬네일들은 원본 사진으로부터 쉽게 재생성할 수 있어요
그리고 60일 동안만 보관해야 하죠
하지만 원본 이미지는 60일 동안은 곧바로 받을 수 있어야 하고요
그 후에 사용자는 최장 6시간 동안 기다릴 수 있어요
그럼 이런 규칙을 어떻게 설계할까요?

시험 문제가 이렇게 나오죠
그럼 S3 원본 이미지는 Standard 클래스에 있을 수 있고요, 60일 후에 Glacier로 이전하기 위한 라이프사이클 설정이 있어요
그리고 섬네일 이미지는…
예를 들어 이렇게 접두어를 써서 소스와 섬네일을 구분하고요
섬네일은 One-Zone IA에 있을 수 있어요, 왜냐면 빈번히 액세스하는 게 아니고 쉽게 재생성할 수 있으니까요
그리고 60일 후에 그것들을 만료시키거나 삭제하는 라이프사이클 설정이 있을 수 있죠

2. 여러분의 회사 규칙에 따라 30일 동안은 삭제된 S3 객체를 즉각적으로 복구할 수
있어야 해요
비록 그런 경우가 드물긴 하겠지만요, 그 기간이 지나면 최장 365일 동안은 삭제된 객체를 48시간 이내에
복구할 수 있어야 해요

그렇게 하기 위해서 우린 S3 버저닝을 활성화해서 객체 버전을 보관할 수 있고요
삭제된 객체들은 실제로 “삭제 마커”에 의해 감춰져 있죠, 그런 다음에 복구할 수 있을 거예요
다음으로 여러분은 현재 버전이 아닌, 즉 최상위 버전이 아닌 객체들을 Standard IA로 이전하기 위한
규칙을 만들 거예요, 즉 그 현재 버전이 아닌 버전들을 아카이브화를 목적으로
Glacier Deep Archive로 이전할 수 있어요
      
