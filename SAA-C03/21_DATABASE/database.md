# Database

rdbms db는 sql을 사용하거나 온라인 트랜잭션을 처리할 때 사용합니다. rds, aurora 같은 데이터베이스가 해당되며 조인에 유용합니다. 

nosql 은 조인 기능은 없고 일반적으로 sql 쿼리언어를 사용하지 않습니다. 

객체 스토어 db는 대용량 객체 저장용 s3나 백업 아카이브용 Glacier가 여기에 포함됩니다. 

데이터 웨어하우스는sql 분석이나 비즈니스 인텔리전스를 사용합니다. 
olap 유형의 데이터베이스인 redshift와 ahthenan, emr이 포함됩니다. 

opensearch db는 텍스트를 입력하거나 비정형 데이터를 검색합니다. 

그 외에도 그래프, 원장 데이터베이스, 시계열 db가 있습니다. 


# RDS

*(중요)*

관리형 PostgreSQL, MySQL Oracle, SQL 서버
MariaDB용 및 사용자 지정 RDS가 있습니다
Amazon RDS를 사용할 때는 RDS 인스턴스 크기와
EBS 볼륨 유형 및 크기를 프로비저닝해야 합니다
스토리지 계층에 오토 스케일링 기능이 있어도 프로비저닝해야 합니다

읽기 전용 복제본을 지원합니다. 고가용성 목적으로 대기 db를 다중 ax에 둘 수 있습니다. 

보안은 aim 을 통해 설정 가능하며 일부 사용자에게 iam  인증을 부여합니다. 데이터 암호화에는 kms를 전송 데이터 암호화에는 ssl, tls 를 사용합니다. 

자동 백업은 35까지 가능합니다. 

rds 프록시를 강제하여 rds에 iam 인증을 추가하는 기능도 있습니다. 

secrets manager 와 통합하여 db 자격 증명을 관리합니다. 

기본 인스턴스에 액세스하고 사용자 지정하려면 rds 사용자 지정옵션을 사용합니다. 

rdbms 와 온라인 트랜잭션 처리 데이터 베이스(oltp)가 포함됩니다. 

# Aurora

두개의 데이터베이스 엔진과 호환이 가능한 api이고 해당 엔진은 postgre sql, mysql 입니다. 

스토리지는 기본 설정으로 세 개의 가용영역에 걸친 여섯 개의 레플리카에 디어트를 저장호고 변경 불가능합니다. 

가용적이여서 자가 복구 과정이 일어납니다. 

스토리지의 확장은 auto scaling 이 있습니다.

aurora 의 기능으로 1. 서버리스입니다. 

용량 계획을 전혀 하지 않아도 됩니다. global db 를 원한다면 16개의 리드 인스턴스를 제공하고 우리의 db가 복제된 리전마다 제공됩니다. 

*스토리지 복제는 1초 미만의 시간에 일어나며 주로 리전 사이에서 일어납니다.*

sageMaker, Comprehend를 사용가능합니다. 스냅샷을 하고 복구하는 것보다 훨씬 신속합니다. 

사용사레는 rds와 동일하지만 보수는 적고 유연성은 더 높으며 성능과 다양한 기능이 있습니다. 

# Elastic Cache

관리형 redis/memcached로 rds와 비슷한 기능을 제공합니다. 

데이터를 읽을 대 1밀리초 미만읜 지연시간을 제공합니다. 

캐시를 위한 ec2 인스턴스 유형을 프로비저닝해야 계속 진행 가능합니다. 

Redis용에서는 클러스터 생성, 다중 AZ와
샤딩을 위한 읽기 전용 복제본을 사용할 수 있습니다

kms, redis 인증, 백업 및 스냅샷, 지정 시간 복구 기능을 사용 가능합니다. 

*ElasticCache를 사용해 RDS 가 결합된 DB에서 캐싱작업을 수행하려면 애플리케이션 코드가 ElasticCAche를 활용하도록 코드를 수정해야 됩니다.*

웹사이트 사용자를 위해 세션 데이터를 저장 가능합니다. 


# Dynamo DB

밀리 초 단위의 레이턴시를 제공하는 관리형 서버리스 NOSQL DB입니다. 

하나는 옵션으로 오토 스케일링이 제공되는 프로비저닝된 용량이예요

또는 온디맨드 용량 모드가 있는데요, 이 모드에서는 용량을 프로비저닝할 필요가 없지만 자동으로 스케일링이 돼요

DynamoDB는 키 값 저장소로 ElastiCache를 대체할 수 있고요
예를 들어 여러분의 웹사이트를 위해 세션 데이터 저장하기 좋아요, TTL 기능이 있어서
일정한 기간 뒤에 행을 만료시킬 수도 있어요

*여러분은 DynamoDB와 완벽히 호환되는 완성품 형태의 읽기 캐시를 만들 수 있고요
그게 바로 DAX 클러스터, 즉 DynamoDB 액셀러레이터예요*

*그리고 그것의 특징은 여러분이 마이크로 초 단위의 읽기 레이턴시를 얻을 수 있다는 점이예요*

DynamoDB Streams를 활성화해서
데이터베이스에 일어나는 모든 변경사항을 스트리밍할 수 있고, DynamoDB Streams에서 람다를 호출할 수 있도록
통합할 수도 있어요

데이터를 DynamoDB Streams에 전송하는 대신에 여러분은 데이터를Kinesis Data Streams에
전송할 수도 있어요

그렇게 할 때의 장점은 여러분이 Kinesis Data Firehose 기능을 활용하거나 Kinesis Data Stream을 활용하는 어떤 종류의
통합도 활용할 수 있다는 점이예요, 예를 들면 Kinesis Data Streams에서 최장 1년 동안의
장기 보관이 가능하죠

글로벌 테이블 기능을 갖게되어서 다수의 리전에 걸쳐 ACTIVE-ACTIVE 복제를 가능합니다. 누구나 어느 리전에서 읽기와 쓰기가 가능합니다.

백업 옵션으로는 자동 백업  (35)일이 가능합니다. 읽기 용량을 전혀 사용하지 않고도 DYNAMO DB 테이블을 s3로 내보낼 수 있습니다. 


*시험에 대비해서 DynamoDB에 관한 내용 중에, 빠르게 스키마를 변경(rapidly evolve schema)해야 하거나
유연한 타입의 데이터베이스 스키마가 필요하다면
DynamoDB가 훌륭한 선택이 될 거예요*

사용 사례로는 서버리스, 데이터가 작은 문서들, 분산형 서버리스 캐시가 필요한 경우가 있습니다. 

# s3 for db

s3는 객체를 키-값으로 저장하므로 여러 개의 작은 객체를 저장할 때는 유용하지 않습니다. 

서버리스 이며 확장성이 무한 합니다. 

*꼭 알아야 할 중요한 기능으로는
버저닝, 암호화, 복제
멀티 팩터 인증(MFA) 삭제와 액세스 로그가 있습니다
보안 기능에는 IAM 보안이 있고요*

*S3 버킷에 버킷 정책을 생성할 수도 있고
ACL 기능도 있습니다
Amazon S3에 액세스 포인트를 생성할 수도 있죠*

*Glacier의 객체 잠금 또는 볼트 잠금 개념을 활용할 수도 있는데요*

암호화 메커니즘으로 sse-s3, kms, sse-kms, sse-c, batch(비암호화 객체를 암호화 하거나, 복제를 활성화하기전에 다른 버킷으로 복사할 때 유용합니다.) 

파일을 병렬식으로 업로드 가능한 멀티파트 업로드가 있습니다.

s3 전송 가속화를 통해 s3파일을 한 리전에서 다른 리전으로 더빠르게 전송가능합니다. 

사용 사례에는 정적파일 큰파일의 키-값 스토어 또는 웹사이트 호스팅이 있습니다. 

# Document DB

DocumentDB는 MongoDB의 Aurora 버전과 다름 없습니다

MongDb는 NOsql DB이며 JSON 데이터를 저장, 쿼리 ,인덱스하기 위해 사용되며 aurora와 비슷한 배포 개념을 documentDB와 가집니다. 

데이터는 세개의 가용 영역에 걸처 복제 되며 스토리지는 자동적으로 10gb 까지 확장합니다. 

# neptune

완전 관리형 그래프 db입니다. 

그래프 데이터 셋에 선택합니다. 3개의 az에 걸쳐 최대 15개의 읽기 전용 복제본으로 복제합니다. 그래프 데이터 셋에서 복잡하고 어려운 쿼리를 실행하기에 최저고하 되어있습니다.

최대 수십억 객의 관계를 저장하며 그래프를 쿼리할 때 지연 시간은 밀리초입니다. 

여러 가용 영역에 걸치 애플리케이션에서도 매우 가용성이 높으며 지식 그래프를 저장하는 데도 뛰어납니다. 

# Amazon keysapces

aws 관리형 apache Cassandre를 보조합니다. 오픈소스 nosql 분산 Db이며 Keyspaces를 사용하면 클라우드에서 aws가 cassandra를 직접 고나리합니다. 

확장성과 가용성이 높으며 aws 완전 관리형입니다. 
트래픽에 따라 테이블을 자동으로 확장/축소합니다. 

여러 az 걸처 세번 복제됩니다. 

지연 시간이 10밀리초 미많으로 짧고 초당 수천 건의 요청을 처리합니다. 

암호화와 백업 기능을 제공하고

최대 35일까지 지정 시간 복구가 가능합니다

사용 사례로는 IoT 장치 정보와 시계열 데이터 저장 등이 있습니다

*Apache Cassandra가 시험에 나오면 하나만 떠올리면 됩니다*

# QLDB

원장은 금융 트랜잭션을 기록하는 장부입니다. 

완전 관리형 데이터베이스이며 서버리스입니다. 가용성이 높고 3개의 가용영역에 걸처 데이터를 복제합니다. 

데이터의 시간에 따른 모든 변경 내역을 검토합니다. 

그리고 불변 시스템입니다. 수정 불가능한거죠

sql를 사용하여 데이터를 관리합니다. 

qldb 관리형 블록체인의 차이점은 sqldb에는 탈중앙화 개념이 없다는 것입니다. 즉, amazon 소유의 중앙 데이터 베이스에서만 저널을 작성 가능합니다. 

qldb에는 중앙 권한 구성 요소가 있다는 것입니다. 

*금융 트랜잭션이나 원장이 나오면 QLDB를 떠올리세요*

# timestream

시계열 db이며 완전 관리형이며 빠르고 확장성있는 서버리스 서비스입니다.

timestream을 사용하면 db 용량을 자동으로 확장, 축소하며 매일 수조 건의 이벤트롤 저장 및 분석합니다. 

sql과 완벽히 호환됩니다. 

거의 실시간으로 데이터를 분석하고 패턴을 찾습니다. 

전송 중 데이터와 저장 데이터의 암호화를 지원합니다.  

JDBC, SQL과 호환 가능한 애플리케이션은
Amazon Timestream을 활용할 수 있습니다

# Quiz
Question 5:
한 스타트업 회사가 솔루션 아키텍트인 여러분에게 사용자들이 서로 친구가 될 수 있고, 서로의 포스트에 좋아요를 남길 수 있는 소셜 미디어 웹사이트 아키텍처의 구축을 도와달라고 한 상황입니다. 이 회사는 ‘Mike의 친구들이 남긴 포스트에는 몇 개의 좋아요가 있는가?’와 같은 복잡한 쿼리를 수행하려 합니다. 이 경우, 어떤 데이터베이스의 사용을 추천할 수 있을까요?

Answer : Neptune 




