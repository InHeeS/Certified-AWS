# IAM

- Identity and Access Management의 약자
- IAM에서는 사용자를 생성하고 그룹에 배치하기 때문에 글로벌 서비스에 해당됩니다
- 그룹에는 사용자만 배치할 수 있습니다 다른 그룹을 포함시킬 순 없죠
- 사용자 또는 그룹에게 정책, 또는 IAM 정책이라고 불리는 JSON 문서를 지정할 수 있습니다

# IAM Permissions
- ![image](https://github.com/user-attachments/assets/0af29f27-d382-450c-8746-39559b73a6cd)

# IAM Policy

- Sid는 문장 ID로 문장의 식별자
- effect는 문장이 특정 API에 접근하는 걸 허용할지 거부할지에 대한 내용
- `Principal은 특정 정책이 적용될 사용자, 계정, 혹은 역할로 구성됩니다`
- `Action은 effect에 기반해 허용 및 거부되는 API 호출의 목록`
- `Resource는 적용될 action의 리소스의 목록으로 이 예시에선 버킷이지만 다른 것들도 될 수도 있겠죠`
- Statement가 언제 적용될지를 결정하는 Condition이 있습니다

# IAM Password Policy

- IAM 사용자들이 자신의 비밀번호를 변경하도록 허용하거나 허용하지 않을 수 있으며 또는 일정 시간 후에 사용자에게 비밀번호를 변경하도록 요구하여비밀번호가 만료되도록 할 수 있습니다
- 다중 인증 또는 MFA
- MFA는 여러분이 알고 있는 비밀번호와 여러분이 소유한 보안 장치의 조합을 사용합니다
- 해커가 앨리스의 물리적 장치도 확보해야 하므로 계정이 손상되지 않는다는 것입니다
    - 가상 MFA 장치
    - 물리적인 장치
 
# AWS Access key, CLI & SDK

- 명령줄 인터페이스인 CLI
  - 컴퓨터에서 설정하여 액세스 키에 의해 보호됩니다.
  - 액세스키란 자격 증명으로 터미널에서의 AWS 액세스를 가능하게 합니다.
  - 액세스 키는 타인과 공유해서는 안됩니다.
- AWS API에 액세스가 가능합니다.
- CLI는 오픈 소스로, GitHub에서 모든 소스 코드를 찾으실 수 있으며 AWS 관리 콘솔 대신 사용되기도 합니다
- AWS CLI는 명령줄 셸에서 명령어를 사용하여 AWS 서비스들과 상호작용할 수 있도록 해 주는 도구입니다
- SDK는 소프트웨어 개발 키트입니다
  - 특정 언어로 된 라이브러리의 집합인데요
  -  AWS CLI는 사실상 Boto라는 Python용 AWS SDK에 구축되어 있습니다

# IAM 역할
- 실제 사용자가 사용하는 것이 아니라 AWS 서비스가 사용하는 것입니다
- AWS 서비스에 권한을 할당해야 하고 이를 위해 IAM 역할이라는 것을 생성해야 합니다
- EC2, Lambda, CloudFormation
- ![image](https://github.com/user-attachments/assets/bb93a07b-3a70-42c9-bfbc-00eebfaf38ae)

# IAM Security Tools
- IAM 자격 증명 보고서를 만들 수 있고 이것은 계정 수준에서 가능합니다
  - 보고서는 계정에 있는 사용자와 다양한 자격 증명의 상태를 포함합니다

- IAM 액세스 관리자
  - 액세스 관리자는 사용자에게 부여된 서비스의 권한과 해당 서비스에 마지막으로 액세스한 시간이 보입니다
  - 최소권한의 원칙에 따랐을 때 매우 도움 되는 정보입니다
  - 액세스 관리자는 AWS에서 세부적인 사용자 액세스 권한을 수행해야 할 때 매우 유용합니다
 
# 주의
- 사용자를 그룹에 할당하고 그룹에 권한을 할당하여 보안이 그룹 수준에서 관리되도록 할 수 있으며 강력한 비밀번호 정책을 만들어야 합니다
- 다중 인증 또는 MFA를 사용하여
- AWS 서비스에 권한을 부여할 때 역할을 생성하고 사용하는 것이 좋습니다
  - 따라서 CLI 또는 일부 SDK에서 액세스 키를 생성해야 합니다
- 근데 IAM 관해서는 여러분이 책임자가 됩니다, AWS가 해주지 않는 것들에 대해서요
- AWS가 책임지는 것은 인프라이고
